mesh:
  type: 1D_rectilinear
  x_nodes: [0.000000000000, 0.000000270130, 0.000000561789, 0.000000876448, 0.000001215664, 0.000001581076, 0.000001974411, 0.000002397485, 0.000002852211, 0.000003340596, 0.000003864746, 0.000004426872, 0.000005029291, 0.000005674427, 0.000006364818, 0.000007103115, 0.000007892089, 0.000008734630, 0.000009633751, 0.000010592593, 0.000011614425, 0.000012702645, 0.000013860788, 0.000015092523, 0.000016401657, 0.000017792138, 0.000019268053, 0.000020833636, 0.000022493264, 0.000024251462, 0.000026112900, 0.000028082399, 0.000030164928, 0.000032365607, 0.000034689706, 0.000037142644, 0.000039729992, 0.000042457470, 0.000045330949, 0.000048356447, 0.000051540130, 0.000054888311, 0.000058407447, 0.000062104137, 0.000065985123, 0.000070057284, 0.000074327634, 0.000078803322, 0.000083491624, 0.000088399945, 0.000093535810, 0.000098906864, 0.000104520866, 0.000110385685, 0.000116509294, 0.000122899767, 0.000129565272, 0.000136514069, 0.000143754497, 0.000151294977, 0.000159143998, 0.000167310118, 0.000175801949, 0.000184628160, 0.000193797459, 0.000203318598, 0.000213200355, 0.000223451533, 0.000234080950, 0.000245097434, 0.000256509811, 0.000268326900, 0.000280557504, 0.000293210404, 0.000306294349, 0.000319818048, 0.000333790161, 0.000348219295, 0.000363113990, 0.000378482717, 0.000394333863, 0.000410675730, 0.000427516523, 0.000444864342, 0.000462727176, 0.000481112895, 0.000500029239, 0.000519483816, 0.000539484092, 0.000560037383, 0.000581150847, 0.000602831482, 0.000625086115, 0.000647921396, 0.000671343793, 0.000695359585, 0.000719974858, 0.000745195496, 0.000771027180, 0.000797475377, 0.000824545342, 0.000852242109, 0.000880570487, 0.000909535057, 0.000939140168, 0.000969389932, 0.001000288225, 0.001031838678, 0.001064044679, 0.001096909370, 0.001130435642, 0.001164626137, 0.001199483244, 0.001235009098, 0.001271205581, 0.001308074319, 0.001345616683, 0.001383833789, 0.001422726497, 0.001462295414, 0.001502540891, 0.001543463027, 0.001585061671, 0.001627336420, 0.001670286623, 0.001713911383, 0.001758209562, 0.001803179775, 0.001848820405, 0.001895129593, 0.001942105253, 0.001989745067, 0.002038046491, 0.002087006763, 0.002136622898, 0.002186891702, 0.002237809769, 0.002289373488, 0.002341579050, 0.002394422448, 0.002447899484, 0.002502005776, 0.002556736760, 0.002612087696, 0.002668053674, 0.002724629619, 0.002781810297, 0.002839590319, 0.002897964147, 0.002956926101, 0.003016470362, 0.003076590982, 0.003137281885, 0.003198536875, 0.003260349640, 0.003322713763, 0.003385622720, 0.003449069891, 0.003513048565, 0.003577551945, 0.003642573153, 0.003708105235, 0.003774141170, 0.003840673873, 0.003907696201, 0.003975200956, 0.004043180895, 0.004111628733, 0.004180537147, 0.004249898783, 0.004319706260, 0.004389952176, 0.004460629111, 0.004531729634, 0.004603246307, 0.004675171689, 0.004747498341, 0.004820218831, 0.004893325735, 0.004966811648, 0.005040669181, 0.005114890970, 0.005189469675, 0.005264397989, 0.005339668640, 0.005415274391, 0.005491208049, 0.005567462465, 0.005644030536, 0.005720905213, 0.005798079499, 0.005875546454, 0.005953299198, 0.006031330913, 0.006109634846, 0.006188204311, 0.006267032692, 0.006346113443, 0.006425440094, 0.006505006249, 0.006584805590, 0.006664831880, 0.006745078962, 0.006825540760, 0.006906211284, 0.006987084629, 0.007068154976, 0.007149416596, 0.007230863847, 0.007312491177, 0.007394293124, 0.007476264321, 0.007558399490, 0.007640693447, 0.007723141101, 0.007805737456, 0.007888477610, 0.007971356754, 0.008054370177, 0.008137513261, 0.008220781481, 0.008304170412, 0.008387675721, 0.008471293169, 0.008555018613, 0.008638848006, 0.008722777394, 0.008806802914, 0.008890920802, 0.008975127382, 0.009059419073, 0.009143792385, 0.009228243920, 0.009312770369, 0.009397368515, 0.009482035228, 0.009566767467, 0.009651562279, 0.009736416798, 0.009821328242, 0.009906293915, 0.009991311205, 0.010076377581, 0.010161490596, 0.010246647881, 0.010331847150, 0.010417086192, 0.010502362875, 0.010587675143, 0.010673021016, 0.010758398585, 0.010843806015, 0.010929241543, 0.011014703474, 0.011100190185, 0.011185700115, 0.011271231775, 0.011356783737, 0.011442354636, 0.011527943172, 0.011613548103, 0.011699168248, 0.011784802482, 0.011870449739, 0.011956109005, 0.012041779322, 0.012127459784, 0.012213149535, 0.012298847769, 0.012384553727, 0.012470266697, 0.012555986013, 0.012641711052, 0.012727441232, 0.012813176014, 0.012898914895, 0.012984657414, 0.013070403141, 0.013156151686, 0.013241902689, 0.013327655823, 0.013413410791, 0.013499167326, 0.013584925187, 0.013670684160, 0.013756444054, 0.013842204703, 0.013927965961, 0.014013727702, 0.014099489821, 0.014185252226, 0.014271014844, 0.014356777614, 0.014442540489, 0.014528303432, 0.014614066417, 0.014699829424, 0.014785592443, 0.014871355465, 0.014957118488, 0.015042881512, 0.015128644535, 0.015214407557, 0.015300170576, 0.015385933583, 0.015471696568, 0.015557459511, 0.015643222386, 0.015728985156, 0.015814747774, 0.015900510179, 0.015986272298, 0.016072034039, 0.016157795297, 0.016243555946, 0.016329315840, 0.016415074813, 0.016500832674, 0.016586589209, 0.016672344177, 0.016758097311, 0.016843848314, 0.016929596859, 0.017015342586, 0.017101085105, 0.017186823986, 0.017272558768, 0.017358288948, 0.017444013987, 0.017529733303, 0.017615446273, 0.017701152231, 0.017786850465, 0.017872540216, 0.017958220678, 0.018043890995, 0.018129550261, 0.018215197518, 0.018300831752, 0.018386451897, 0.018472056828, 0.018557645364, 0.018643216263, 0.018728768225, 0.018814299885, 0.018899809815, 0.018985296526, 0.019070758457, 0.019156193985, 0.019241601415, 0.019326978984, 0.019412324857, 0.019497637125, 0.019582913808, 0.019668152850, 0.019753352119, 0.019838509404, 0.019923622419, 0.020008688795, 0.020093706085, 0.020178671758, 0.020263583202, 0.020348437721, 0.020433232533, 0.020517964772, 0.020602631485, 0.020687229631, 0.020771756080, 0.020856207615, 0.020940580927, 0.021024872618, 0.021109079198, 0.021193197086, 0.021277222606, 0.021361151994, 0.021444981387, 0.021528706831, 0.021612324279, 0.021695829588, 0.021779218519, 0.021862486739, 0.021945629823, 0.022028643246, 0.022111522390, 0.022194262544, 0.022276858899, 0.022359306553, 0.022441600510, 0.022523735679, 0.022605706876, 0.022687508823, 0.022769136153, 0.022850583404, 0.022931845024, 0.023012915371, 0.023093788716, 0.023174459240, 0.023254921038, 0.023335168120, 0.023415194410, 0.023494993751, 0.023574559906, 0.023653886557, 0.023732967308, 0.023811795689, 0.023890365154, 0.023968669087, 0.024046700802, 0.024124453546, 0.024201920501, 0.024279094787, 0.024355969464, 0.024432537535, 0.024508791951, 0.024584725609, 0.024660331360, 0.024735602011, 0.024810530325, 0.024885109030, 0.024959330819, 0.025033188352, 0.025106674265, 0.025179781169, 0.025252501659, 0.025324828311, 0.025396753693, 0.025468270366, 0.025539370889, 0.025610047824, 0.025680293740, 0.025750101217, 0.025819462853, 0.025888371267, 0.025956819105, 0.026024799044, 0.026092303799, 0.026159326127, 0.026225858830, 0.026291894765, 0.026357426847, 0.026422448055, 0.026486951435, 0.026550930109, 0.026614377280, 0.026677286237, 0.026739650360, 0.026801463125, 0.026862718115, 0.026923409018, 0.026983529638, 0.027043073899, 0.027102035853, 0.027160409681, 0.027218189703, 0.027275370381, 0.027331946326, 0.027387912304, 0.027443263240, 0.027497994224, 0.027552100516, 0.027605577552, 0.027658420950, 0.027710626512, 0.027762190231, 0.027813108298, 0.027863377102, 0.027912993237, 0.027961953509, 0.028010254933, 0.028057894747, 0.028104870407, 0.028151179595, 0.028196820225, 0.028241790438, 0.028286088617, 0.028329713377, 0.028372663580, 0.028414938329, 0.028456536973, 0.028497459109, 0.028537704586, 0.028577273503, 0.028616166211, 0.028654383317, 0.028691925681, 0.028728794419, 0.028764990902, 0.028800516756, 0.028835373863, 0.028869564358, 0.028903090630, 0.028935955321, 0.028968161322, 0.028999711775, 0.029030610068, 0.029060859832, 0.029090464943, 0.029119429513, 0.029147757891, 0.029175454658, 0.029202524623, 0.029228972820, 0.029254804504, 0.029280025142, 0.029304640415, 0.029328656207, 0.029352078604, 0.029374913885, 0.029397168518, 0.029418849153, 0.029439962617, 0.029460515908, 0.029480516184, 0.029499970761, 0.029518887105, 0.029537272824, 0.029555135658, 0.029572483477, 0.029589324270, 0.029605666137, 0.029621517283, 0.029636886010, 0.029651780705, 0.029666209839, 0.029680181952, 0.029693705651, 0.029706789596, 0.029719442496, 0.029731673100, 0.029743490189, 0.029754902566, 0.029765919050, 0.029776548467, 0.029786799645, 0.029796681402, 0.029806202541, 0.029815371840, 0.029824198051, 0.029832689882, 0.029840856002, 0.029848705023, 0.029856245503, 0.029863485931, 0.029870434728, 0.029877100233, 0.029883490706, 0.029889614315, 0.029895479134, 0.029901093136, 0.029906464190, 0.029911600055, 0.029916508376, 0.029921196678, 0.029925672366, 0.029929942716, 0.029934014877, 0.029937895863, 0.029941592553, 0.029945111689, 0.029948459870, 0.029951643553, 0.029954669051, 0.029957542530, 0.029960270008, 0.029962857356, 0.029965310294, 0.029967634393, 0.029969835072, 0.029971917601, 0.029973887100, 0.029975748538, 0.029977506736, 0.029979166364, 0.029980731947, 0.029982207862, 0.029983598343, 0.029984907477, 0.029986139212, 0.029987297355, 0.029988385575, 0.029989407407, 0.029990366249, 0.029991265370, 0.029992107911, 0.029992896885, 0.029993635182, 0.029994325573, 0.029994970709, 0.029995573128, 0.029996135254, 0.029996659404, 0.029997147789, 0.029997602515, 0.029998025589, 0.029998418924, 0.029998784336, 0.029999123552, 0.029999438211, 0.029999729870, 0.030000000000]
  y_nodes: [0.0, 1.0] # Uniform 1 cell for 1D

electrodes:
  - name: left
    location: x_min
    voltage_type: RF
    voltage_amplitude: 100.0
    frequency: 13.56e6
    phase: 0.0
    bias: 0.0
    gamma_see: 0.00
  - name: right
    location: x_max
    voltage_type: RF
    voltage_amplitude: 100.0
    frequency: 13.56e6
    phase: 3.14159265
    bias: 0.0
    gamma_see: 0.00

plasma:
  gas_pressure: 10.0
  background_temp: 300.0
  background_gas: Ar

# Species definitions
species:
  # Electron with BOLSIG+ transport data
  - name: e
    type: electron
    charge: -1.0                  # Elementary charge units
    mass: 9.10938e-31            # kg
    mobility_file: data/electron_moments_cust.txt  # BOLSIG+ format (table in file depends on pressure): Energy Electron (eV) | Mobility (nuN) | Diffusion (nuN)
    
  # Argon ion
  - name: Ar+
    type: ion
    charge: 1.0
    mass: 6.6335e-26             # kg (40 amu)
    mobility_coeff: 0.144409938
    diffusion_coeff: 6.428571e-3
    
  # Neutral excited species (metastable)
  - name: Ar1s5
    type: neutral
    charge: 0.0
    mass: 6.6335e-26
    diffusion_coeff: 7.515528e-3        # (constant for neutrals)
    mobility_file: ""            # Not used for neutrals
    
#  - name: Ar1s3
#    type: neutral
#    charge: 0.0
#    mass: 6.6335e-26
#    diffusion_coeff: 7.515528e-3        # (constant for neutrals)
#    mobility_file: ""            # Not used for neutrals

reactions:
  - equation: "e + Ar -> 2e + Ar+"
    name_for_output: ioniz1
    type: ionization
    energy_change: -15.7
    rate_type: table
    table_file: data/ar_ionization_mc_red.txt # BOLSIG+ format ( ): Energy Electron (eV) | Reaction Coefficient (*N_A (Avogadro Number))
    
  - equation: "e + Ar -> e + Ar"
    name_for_output: elast1
    type: elastic
    energy_change: "" # Not used for elastic type reactions
    rate_type: table
    table_file: data/ar_elastic_mc_red.txt # BOLSIG+ format ( ): Energy Electron (eV) | Reaction Coefficient (*N_A (Avogadro Number))
    
  - equation: "e + Ar -> e + Ar1s5"
    name_for_output: excit1
    type: excitation
    energy_change: -11.56
    rate_type: table
    table_file: data/ar_excitation.txt # BOLSIG+ format ( ): Energy Electron (eV) | Reaction Coefficient(*N_A (Avogadro Number))
    
#  - equation: "Ar1s3 -> Ar1s5"
#    name_for_output: radia1
#    type: radiation
#    energy_change: "" # Not used for elastic type reactions
#    rate_type: equation
#    equation_constants : "rho_L M_gas Tgas g1s5 g1s4 g1s3 g1s2 g2p10 g2p9 g2p8 g2p7 g2p6 g2p5 g2p4 g2p3 g2p2 g2p1" # Names of equation constants
#    equation_values : "0.03 39.95 300.0 5.0 3.0 1.0 3.0 3.0 7.0 5.0 3.0 5.0 1.0 3.0 5.0 3.0 1.0" # Values of equation constants above
#    equation_variables : "Ar1s5_density Ar1s4_density Ar1s3_density Ar1s2_density" # The names of the variables used in the equation, the values of which are derived from the calculation in a given (past) time step at the same point in the area where the reaction is determined
#    equation: {18900000 * (2.0 - exp((-1.0e-3) * rho_L * ((g2p10 * (912.547 * 1.0e-9) ^ (3.0) * Ar1s5_density * 1.89e+7 * ((M_gas)/(2.0 * 8.3145 * Tgas))^(0.5))/(g1s5 * 8.0 * 5.568328))))/(1.0 + (rho_L * ((g2p10 * (912.547 * 1.0e-9) ^ (3.0) * Ar1s5_density * 1.89e+7 * ((M_gas)/(2.0 * 8.3145 * Tgas))^(0.5))/(g1s5 * 8.0 * 5.568328))))}
    
initial_condition:
  - name: e
    value: 1e14  # 1/m^3
    
  - name: e_energy # Electron energy
    value: 1.5  # eV

  - name: Ar+
    value: 1e14  # 1/m^3

  - name: Ar1s5
    value: 1e14  # 1/m^3

#  - name: Ar1s3
#    value: 1e14  # 1/m^3

solver:
  type: JFNK                      # Jacobian-Free Newton-Krylov
  tolerance: 1.0e-8               # SNES tolerance
  max_iterations: 200
  time_step: 1.8436578e-11        # seconds 
  end_time: 7.37463e-7            # 1 ns simulation
  preconditioner: jacobi          # Standard preconditioner
  ksp_type: gmres                 # Krylov subspace method


output:
  format: hdf5
  minimum_time_interval: 7.37463e-10 # The minimum simulation time between output steps
  save_rates: true
  filename: "output.h5"
  save_fields:                    # Which fields to output
    - electron_density            # Belongs to e_density
    - ion_density                 # Belongs to Ar+_density
    - potential
    - electric_field
    - electron_energy             # Electron temperature (eV)
    - Ar1s5_density
#    - Ar1s3_density
  rates:                          # Which rates to output
    - ioniz1
    - excit1
#    - radia1
  
  # Checkpoint configuration
  checkpoint_frequency: 1000      # Save checkpoint every 1000 steps
  checkpoint_filename: checkpoint.h5
  add_timestep: yes               # Add timestep number to checkpoint filename

# Restart (command-line flag overrides)
# Usage: ./HydroPlas --config this_file.yaml --restart checkpoint.h5 --restart_step 5000
restart:
  enabled: false
  file: checkpoint.h5
  step: 0
  
advanced:
  # Adaptive time stepping
  adaptive_dt: false
  dt_min: 1.0e-13
  dt_max: 1.0e-10
  
  # Parallel configuration
  mpi_decomposition: auto         # or specify: [nx_procs, ny_procs]
  
  # Convergence criteria
  density_floor: 1.0e6           # Minimum density (1/m^3)
  energy_floor: 0.1              # Minimum electron energy (eV)
  
  # Boundary condition details
  wall_quenching_probability: 0.1  # For metastables
  thermal_velocity_factor: 0.25    # For thermal flux BCs
